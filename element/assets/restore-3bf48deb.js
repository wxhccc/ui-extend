import{_ as S,c as N,r as P,b as V,A as R,S as U,M as o,p as f,q as h,t as v,v as $,N as a,V as i,R as w,C as B,Q as D}from"./framework-d784189f.js";const M=N({setup(){const e=P(),t=V({curTab:"list",loading:!1,pagedData:{},reqControl:!1,restore:!1,searchData:{title:"",description:""},tempData:{description:""},paginationProps:{simple:!0}});let m=0;const b=()=>{t.searchData.description=t.tempData.description},k=(n,r)=>(console.log(n,r),m=r,t.loading=!0,C(n).then(l=>{t.reqControl&&m!==r||(console.log(n,l),t.pagedData=l)}).finally(()=>{t.loading=!1})),C=n=>new Promise(r=>{const{current:l,size:c,title:p="",description:u=""}=n,_=Array(c||10).fill(0).map((y,g)=>{const d=Math.random();return{id:(l-1)*c+g,title:p+d.toString(26).substring(2),description:u+d.toString(34).substring(2)+d.toString(32)}});window.setTimeout(()=>{r({rows:_,total:200})},1500)});return R(()=>t.curTab,n=>{n==="list"?(t.searchData={title:""},t.restore&&B(()=>{const{params:r}=e.value.getStoreData();t.searchData.title=r.title})):t.restore=!0}),{list:e,...U(t),searchDesc:b,getPagedData:k}}}),A={key:0},F=D("p",null,"请输入内容并选择页面，然后切换到详情页，然后切换回来",-1),j=D("p",null,"以下搜索条件自动修改extraForm变量值：",-1),z=D("p",null,"以下条件需点击按钮手动修改extraForm变量值",-1),E={key:1};function I(e,t,m,b,k,C){const n=o("a-tab-pane"),r=o("a-tabs"),l=o("a-switch"),c=o("a-alert"),p=o("a-input"),u=o("a-form-item"),_=o("a-button"),y=o("a-form"),g=o("a-avatar"),d=o("a-list-item-meta"),T=o("a-list-item"),q=o("ue-paged-list");return f(),h("div",null,[v(" restore: "+$(e.restore)+" ",1),a(r,{"active-key":e.curTab,"onUpdate:activeKey":t[0]||(t[0]=s=>e.curTab=s)},{default:i(()=>[a(n,{key:"list",tab:"列表页"}),a(n,{key:"detail",tab:"详情页"})]),_:1},8,["active-key"]),e.curTab==="list"?(f(),h("div",A,[v(" 是否进行时序控制："),a(l,{checked:e.reqControl,"onUpdate:checked":t[1]||(t[1]=s=>e.reqControl=s),"checked-children":"请求控制","un-checked-children":"不控制"},null,8,["checked"]),a(c,{message:"仔细观察不控制时序时，数据可能和搜索条件不对应",type:"info"}),F,a(y,null,{default:i(()=>[j,a(u,{label:"标题"},{default:i(()=>[a(p,{value:e.searchData.title,"onUpdate:value":t[2]||(t[2]=s=>e.searchData.title=s),placeholder:"请输入标题搜索"},null,8,["value"])]),_:1}),z,a(u,{label:"描述"},{default:i(()=>[a(p,{value:e.tempData.description,"onUpdate:value":t[3]||(t[3]=s=>e.tempData.description=s),style:{width:"200px"},placeholder:"请输入描述，点击按钮搜索"},null,8,["value"])]),_:1}),a(_,{onClick:e.searchDesc},{default:i(()=>[v("搜索")]),_:1},8,["onClick"])]),_:1}),a(q,{ref:"list",class:"paded-list-demo-table","created-auto-send":"","paged-data":e.pagedData,loading:e.loading,"extra-model":e.searchData,restore:e.restore,"need-store":"",pagination:e.paginationProps,"get-paged-data":e.getPagedData},{renderItem:i(({item:s})=>[a(T,null,{default:i(()=>[a(d,{title:s.title,description:s.description},{avatar:i(()=>[a(g,{src:"https://joeschmoe.io/api/v1/random"})]),_:2},1032,["title","description"])]),_:2},1024)]),_:1},8,["paged-data","loading","extra-model","restore","pagination","get-paged-data"])])):w("v-if",!0),e.curTab==="detail"?(f(),h("div",E,"假装这个是详情页")):w("v-if",!0)])}const G=S(M,[["render",I],["__file","restore.vue"]]);export{G as default};
